{"id":"9aecef03-a2ef-11ef-bb4a-7020840d2517","desc":"","type_name":"graph","test_coverage":{"path_coverage":{"path_coverage_method":"All"},"condition_points_coverage":{"condition_coverage_method":"All_DT","point_coverage_method":"3-points","coverage_type":"customize"}},"h_function":"none","entry_action_list":[],"exit_action_list":[],"nodes":[{"id":"5ef81b75-7e30-4fa0-a64d-f106c2880c74","desc":"","type_name":"start","render_config":{"color":"#e5bc5e","visible":true,"x":765,"y":-640,"width":80,"height":40},"is_init_node":true,"is_finish_node":false,"input_transitions":[],"ports":{"items":[{"group":"bottom","id":"581b2f60-5561-11ef-ac44-2f861776bbe7"}],"groups":{"top":{"position":"top","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#de7a7a"}}},"bottom":{"position":"bottom","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#517cec"}}}}},"output_transitions":["9d5c7aff-746d-4a2c-8f49-4dcbf35a8c9f"]},{"id":"06205440-5563-11ef-ac0a-074ec12ccc34","desc":"切换档位","type_name":"state","render_config":{"color":"#fab7cb","visible":true,"x":640,"y":-360,"width":330,"height":74},"is_init_node":false,"is_finish_node":false,"input_transitions":["635ce3b8-5c6c-4dfd-874a-99c22bc00d9f"],"ports":{"items":[{"group":"top","id":"b4acf8a0-5564-11ef-ac0a-074ec12ccc34"},{"group":"bottom","id":"00f603d0-5567-11ef-ac0a-074ec12ccc34"}],"groups":{"top":{"position":"top","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#de7a7a"}}},"bottom":{"position":"bottom","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#517cec"}}}}},"output_transitions":["71714512-20f4-4dd2-a264-78c7320e4bc3"],"pre_think_time":0,"post_think_time":"2","exit_action_list":[],"entry_action_list":[],"during_action_list":[{"pre_think_time":0,"post_think_time":0,"express":"整车模式 = 2","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"整车State状态 = 30","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"策略档位 = 1","type":"action"}],"normal_test_action_list":[],"dynamic_test_action_list":[],"ref_graph":null,"forward_propagation":false,"time_props":{"type":"wait","value":5,"unit":"sec"}},{"id":"51254175-c582-4fe3-8d9c-241b88ac71c0","desc":"上电","type_name":"state","render_config":{"color":"#fab7cb","visible":true,"x":720,"y":-518,"width":170,"height":74},"is_init_node":false,"is_finish_node":false,"input_transitions":["9d5c7aff-746d-4a2c-8f49-4dcbf35a8c9f"],"ports":{"items":[{"group":"top","id":"58bb18e0-5561-11ef-ac44-2f861776bbe7"},{"group":"bottom","id":"bbf0cb80-5566-11ef-ac0a-074ec12ccc34"}],"groups":{"top":{"position":"top","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#de7a7a"}}},"bottom":{"position":"bottom","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#517cec"}}}}},"output_transitions":["635ce3b8-5c6c-4dfd-874a-99c22bc00d9f"],"pre_think_time":0,"post_think_time":"2","exit_action_list":[],"entry_action_list":[],"during_action_list":[{"pre_think_time":0,"post_think_time":0,"express":"整车模式 = 2","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"整车State状态 = 30","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"T15s累计积分能量 = 0","type":"action"}],"normal_test_action_list":[],"dynamic_test_action_list":[],"ref_graph":null,"forward_propagation":false,"time_props":{"type":"wait","value":"20","unit":"sec"}},{"id":"fccccc80-5566-11ef-ac0a-074ec12ccc34","desc":"切换档位","type_name":"state","render_config":{"color":"#fab7cb","visible":true,"x":640,"y":-230,"width":330,"height":98},"is_init_node":false,"is_finish_node":false,"input_transitions":["71714512-20f4-4dd2-a264-78c7320e4bc3"],"ports":{"items":[{"group":"top","id":"01248de0-5567-11ef-ac0a-074ec12ccc34"},{"group":"bottom","id":"a2f51d60-5567-11ef-ac0a-074ec12ccc34"}],"groups":{"top":{"position":"top","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#de7a7a"}}},"bottom":{"position":"bottom","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#517cec"}}}}},"output_transitions":["13b73ded-ce3f-42eb-9413-7175ce36cd99"],"pre_think_time":0,"post_think_time":"2","exit_action_list":[],"entry_action_list":[],"during_action_list":[{"pre_think_time":0,"post_think_time":0,"express":"整车模式 = 2","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"整车State状态 = 30","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"策略档位 = 4","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"回馈能量百分比_15s = 0","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"回馈能量百分比_30s = 0","type":"action"}],"normal_test_action_list":[],"dynamic_test_action_list":[],"ref_graph":null,"forward_propagation":false,"time_props":{"type":"wait","value":5,"unit":"sec"}},{"id":"7e22f5b9-5eea-4f16-be4f-f994c27d03ec","desc":"","type_name":"comment","render_config":{"color":"#e5bc5e","visible":true,"x":-50,"y":370,"width":380,"height":100},"is_init_node":false,"is_finish_node":false,"input_transitions":[],"ports":{"items":[]},"output_transitions":[],"comment":"二、“15s功率与30s功率过渡”状态：\n计算当前允许最大回馈功率VfRPM_ChargePowerInteg_kw = 状态初始功率VfRPM_ActChgPowSave_kw - (T15s回馈能量百分比 - KfRPM_P15to30Thrhd_Null) * (VfRPM_ActChgPowSave_kw - 当前状态允许最大回馈功率（长时）) / (KfRPM_P30toCon_stThrhd_Null - KfRPM_P15to30Thrhd_Null)"},{"id":"b6dd5b40-5566-11ef-ac0a-074ec12ccc34","desc":"一、“15s功率”状态：①初始默认进入；计算当前允许最大回馈功率","type_name":"state","render_config":{"color":"#fab7cb","visible":true,"x":525,"y":-69.99999999999979,"width":560,"height":150},"is_init_node":false,"is_finish_node":false,"input_transitions":["13b73ded-ce3f-42eb-9413-7175ce36cd99"],"ports":{"items":[{"group":"top","id":"a35abd00-5567-11ef-ac0a-074ec12ccc34"},{"group":"bottom","id":"a180fd80-5573-11ef-a307-2d68a5536c3a"}],"groups":{"top":{"position":"top","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#de7a7a"}}},"bottom":{"position":"bottom","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#517cec"}}}}},"output_transitions":["9c3ac224-8633-4941-abd4-8b6f4866160f"],"pre_think_time":0,"post_think_time":"2","exit_action_list":[],"entry_action_list":[],"during_action_list":[{"pre_think_time":0,"post_think_time":0,"express":"整车模式 = 2","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"整车State状态 = 30","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"功率状态_回收 = 1","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"T15s累计积分能量 = 0","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"T30s累计积分能量 = 0","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"计算当前允许最大回馈功率 = 10","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"目前电机系统允许最大回馈功率 = 10","type":"action"}],"normal_test_action_list":[{"pre_think_time":0,"post_think_time":0,"express":"观测(前驱动电机当前转速)","type":"action"}],"dynamic_test_action_list":[],"ref_graph":null,"forward_propagation":false,"time_props":{"type":"wait","value":5,"unit":"sec"}},{"id":"97760970-5573-11ef-a307-2d68a5536c3a","desc":"二、“15s功率与30s功率过渡”状态：⑤T15s回馈能量百分比 ≥ KfRPM_P15to30Thrhd_Null（0.5）；","type_name":"state","render_config":{"color":"#fab7cb","visible":true,"x":400,"y":130,"width":810,"height":130},"is_init_node":false,"is_finish_node":false,"input_transitions":["9c3ac224-8633-4941-abd4-8b6f4866160f"],"ports":{"items":[{"group":"top","id":"a1d67080-5573-11ef-a307-2d68a5536c3a"},{"group":"bottom","id":"34eec610-59de-11ef-a258-357058874472"}],"groups":{"top":{"position":"top","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#de7a7a"}}},"bottom":{"position":"bottom","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#517cec"}}}}},"output_transitions":["c3ec0e97-f30b-474b-b642-9461bb6e689d"],"pre_think_time":0,"post_think_time":"2","exit_action_list":[],"entry_action_list":[],"during_action_list":[{"pre_think_time":0,"post_think_time":0,"express":"整车模式 = 2","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"整车State状态 = 30","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"功率状态_回收 = 2","type":"action"}],"normal_test_action_list":[{"pre_think_time":0,"post_think_time":0,"express":"观测(T15s累计积分能量)","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"回馈能量百分比_15s > enum.回馈能量百分比_15s('KfRPM_P15to30Thrhd_Null')","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"回馈能量百分比_15s < enum.回馈能量百分比_15s('KfRPM_P30toCon_stThrhd_Null')","type":"action"}],"dynamic_test_action_list":[],"ref_graph":null,"forward_propagation":false,"time_props":{"type":"wait","value":"15","unit":"sec"}},{"id":"db72a400-5576-11ef-a338-e397585b0d7d","desc":"一、“15s功率”状态：②T15s回馈能量百分比 < KfRPM_P15to30Thrhd_Null（0.5）；","type_name":"state","render_config":{"color":"#fab7cb","visible":true,"x":440,"y":576.0000000000007,"width":730,"height":130},"is_init_node":false,"is_finish_node":false,"input_transitions":["4fa366b5-a14d-40ee-9905-cc050947d749"],"ports":{"items":[{"group":"bottom","id":"3ec323e0-5577-11ef-a338-e397585b0d7d"},{"group":"top","id":"27cc7fe0-59de-11ef-a258-357058874472"}],"groups":{"top":{"position":"top","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#de7a7a"}}},"bottom":{"position":"bottom","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#517cec"}}}}},"output_transitions":["14bac9cd-2420-40b2-b55a-13996c13cd8e"],"pre_think_time":0,"post_think_time":"2","exit_action_list":[],"entry_action_list":[],"during_action_list":[{"pre_think_time":0,"post_think_time":0,"express":"整车模式 = 2","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"整车State状态 = 30","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"功率状态_回收 = 1","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"计算当前允许最大回馈功率 = 10","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"目前电机系统允许最大回馈功率 = 10","type":"action"}],"normal_test_action_list":[{"pre_think_time":0,"post_think_time":0,"express":"回馈能量百分比_15s < enum.回馈能量百分比_15s('KfRPM_P15to30Thrhd_Null')","type":"action"}],"dynamic_test_action_list":[],"ref_graph":null,"forward_propagation":false,"time_props":{"type":"wait","value":"20","unit":"sec"}},{"id":"232d3d20-59fd-11ef-a258-357058874472","desc":"计算当前允许最大回馈功率VfRPM_ChargePowerInteg_kw ","type_name":"state","render_config":{"color":"#fab7cb","visible":true,"x":375,"y":328,"width":860,"height":170},"is_init_node":false,"is_finish_node":false,"input_transitions":["c3ec0e97-f30b-474b-b642-9461bb6e689d"],"ports":{"items":[{"group":"top","id":"24c67ac0-59fd-11ef-a258-357058874472"},{"group":"bottom","id":"28f7c860-59fd-11ef-a258-357058874472"}],"groups":{"top":{"position":"top","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#de7a7a"}}},"bottom":{"position":"bottom","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#517cec"}}}}},"output_transitions":["4fa366b5-a14d-40ee-9905-cc050947d749"],"pre_think_time":0,"post_think_time":"2","exit_action_list":[],"entry_action_list":[],"during_action_list":[{"pre_think_time":0,"post_think_time":0,"express":"整车模式 = 2","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"整车State状态 = 30","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"功率状态_回收 = 2","type":"action"}],"normal_test_action_list":[],"dynamic_test_action_list":[{"pre_think_time":0,"post_think_time":0,"express":"save(状态初始功率,0)","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"save(回馈能量百分比_15s,1)","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"save(当前状态允许最大回馈功率30s,2)","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"计算当前允许最大回馈功率 in 允许误差范围((load(状态初始功率,0)-(load(回馈能量百分比_15s,1)-0.5)*(load(状态初始功率,0)-load(当前状态允许最大回馈功率30s,2))/(0.8-0.5)),0.1)","type":"action"}],"ref_graph":null,"forward_propagation":false,"time_props":{"type":"wait","value":"10","unit":"sec"}},{"id":"37e86120-5577-11ef-a338-e397585b0d7d","desc":"下电","type_name":"state","render_config":{"color":"#fab7cb","visible":true,"x":665,"y":770,"width":280,"height":130},"is_init_node":false,"is_finish_node":false,"input_transitions":["14bac9cd-2420-40b2-b55a-13996c13cd8e"],"ports":{"items":[{"group":"top","id":"3ef04e60-5577-11ef-a338-e397585b0d7d"}],"groups":{"top":{"position":"top","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#de7a7a"}}},"bottom":{"position":"bottom","args":{"strict":true},"attrs":{"circle":{"r":3,"magnet":true,"stroke":"#a7ee7b","strokeWidth":1,"fill":"#517cec"}}}}},"output_transitions":[],"pre_think_time":0,"post_think_time":"10","exit_action_list":[],"entry_action_list":[],"during_action_list":[{"pre_think_time":0,"post_think_time":0,"express":"整车模式 = 1","type":"action"},{"pre_think_time":0,"post_think_time":0,"express":"整车State状态 = 49","type":"action"}],"normal_test_action_list":[{"pre_think_time":0,"post_think_time":0,"express":"restore_default(exception = [钥匙开关])","type":"action"}],"dynamic_test_action_list":[],"ref_graph":null,"forward_propagation":false,"time_props":{"type":"wait","value":"T_OFF","unit":"sec"}}],"transitions":[{"id":"9d5c7aff-746d-4a2c-8f49-4dcbf35a8c9f","desc":"","type_name":"transition","render_config":{"color":"#CDFFAE","visible":true,"x":0,"y":0,"width":0,"height":0},"test_layer":{"data":[],"is_order":true,"is_group":true},"test_coverage":{"is_configured":false},"condition":"钥匙开关==2","action_list":[],"loop_times":1,"event_list":[],"source_node":"5ef81b75-7e30-4fa0-a64d-f106c2880c74","target_node":"51254175-c582-4fe3-8d9c-241b88ac71c0","source_port_name":"581b2f60-5561-11ef-ac44-2f861776bbe7","target_port_name":"58bb18e0-5561-11ef-ac44-2f861776bbe7","vertices":[],"time_tolerance":{"type":"percent","value":0}},{"id":"635ce3b8-5c6c-4dfd-874a-99c22bc00d9f","desc":"","type_name":"transition","render_config":{"color":"#CDFFAE","visible":true,"x":0,"y":0,"width":0,"height":0},"test_layer":{"data":[],"is_order":true,"is_group":true},"test_coverage":{"is_configured":false},"condition":"刹车==100","action_list":[],"loop_times":1,"event_list":[],"source_node":"51254175-c582-4fe3-8d9c-241b88ac71c0","target_node":"06205440-5563-11ef-ac0a-074ec12ccc34","source_port_name":"bbf0cb80-5566-11ef-ac0a-074ec12ccc34","target_port_name":"b4acf8a0-5564-11ef-ac0a-074ec12ccc34","vertices":[],"time_tolerance":{"type":"percent","value":0}},{"id":"71714512-20f4-4dd2-a264-78c7320e4bc3","desc":"","type_name":"transition","render_config":{"color":"#CDFFAE","visible":true,"x":0,"y":0,"width":0,"height":0},"test_layer":{"data":[],"is_order":true,"is_group":true},"test_coverage":{"is_configured":false},"condition":"档位==4","action_list":[],"loop_times":1,"event_list":[],"source_node":"06205440-5563-11ef-ac0a-074ec12ccc34","target_node":"fccccc80-5566-11ef-ac0a-074ec12ccc34","source_port_name":"00f603d0-5567-11ef-ac0a-074ec12ccc34","target_port_name":"01248de0-5567-11ef-ac0a-074ec12ccc34","vertices":[],"time_tolerance":{"type":"percent","value":0}},{"id":"14bac9cd-2420-40b2-b55a-13996c13cd8e","desc":"","type_name":"transition","render_config":{"color":"#CDFFAE","visible":true,"x":0,"y":0,"width":0,"height":0},"test_layer":{"data":[],"is_order":true,"is_group":true},"test_coverage":{"is_configured":false},"condition":"钥匙开关==0","action_list":[],"loop_times":1,"event_list":[],"source_node":"db72a400-5576-11ef-a338-e397585b0d7d","target_node":"37e86120-5577-11ef-a338-e397585b0d7d","source_port_name":"3ec323e0-5577-11ef-a338-e397585b0d7d","target_port_name":"3ef04e60-5577-11ef-a338-e397585b0d7d","vertices":[],"time_tolerance":{"type":"percent","value":0}},{"id":"c3ec0e97-f30b-474b-b642-9461bb6e689d","desc":"","type_name":"transition","render_config":{"color":"#CDFFAE","visible":true,"x":0,"y":0,"width":0,"height":0},"test_layer":{"data":[],"is_order":true,"is_group":true},"test_coverage":{"is_configured":false},"condition":"","action_list":[],"loop_times":1,"event_list":[],"source_node":"97760970-5573-11ef-a307-2d68a5536c3a","target_node":"232d3d20-59fd-11ef-a258-357058874472","source_port_name":"34eec610-59de-11ef-a258-357058874472","target_port_name":"24c67ac0-59fd-11ef-a258-357058874472","vertices":[],"time_tolerance":{"type":"percent","value":0}},{"id":"13b73ded-ce3f-42eb-9413-7175ce36cd99","desc":"","type_name":"transition","render_config":{"color":"#CDFFAE","visible":true,"x":0,"y":0,"width":0,"height":0},"test_layer":{"data":[],"is_order":true,"is_group":true},"test_coverage":{"is_configured":false},"condition":"刹车==0 and 前驱动电机当前转速==(9550*enum.前驱动电机当前转速('K15to30')-955) and 实际扭矩标志位==1 and 实际扭矩==10 and 当前状态允许最大回馈功率15s==10 and 当前状态允许最大回馈功率30s==9 and 当前状态允许最大回馈功率_持续==1","action_list":[],"loop_times":1,"event_list":[],"source_node":"fccccc80-5566-11ef-ac0a-074ec12ccc34","target_node":"b6dd5b40-5566-11ef-ac0a-074ec12ccc34","source_port_name":"a2f51d60-5567-11ef-ac0a-074ec12ccc34","target_port_name":"a35abd00-5567-11ef-ac0a-074ec12ccc34","vertices":[],"time_tolerance":{"type":"percent","value":0}},{"id":"9c3ac224-8633-4941-abd4-8b6f4866160f","desc":"","type_name":"transition","render_config":{"color":"#CDFFAE","visible":true,"x":0,"y":0,"width":0,"height":0},"test_layer":{"data":[],"is_order":true,"is_group":true},"test_coverage":{"is_configured":false},"condition":"实际扭矩==-10","action_list":[],"loop_times":1,"event_list":[],"source_node":"b6dd5b40-5566-11ef-ac0a-074ec12ccc34","target_node":"97760970-5573-11ef-a307-2d68a5536c3a","source_port_name":"a180fd80-5573-11ef-a307-2d68a5536c3a","target_port_name":"a1d67080-5573-11ef-a307-2d68a5536c3a","vertices":[],"time_tolerance":{"type":"percent","value":0}},{"id":"4fa366b5-a14d-40ee-9905-cc050947d749","desc":"","type_name":"transition","render_config":{"color":"#CDFFAE","visible":true,"x":0,"y":0,"width":0,"height":0},"test_layer":{"data":[],"is_order":true,"is_group":true},"test_coverage":{"is_configured":false},"condition":"实际扭矩==10","action_list":[],"loop_times":1,"event_list":[],"source_node":"232d3d20-59fd-11ef-a258-357058874472","target_node":"db72a400-5576-11ef-a338-e397585b0d7d","source_port_name":"28f7c860-59fd-11ef-a258-357058874472","target_port_name":"27cc7fe0-59de-11ef-a258-357058874472","vertices":[],"time_tolerance":{"type":"percent","value":0}}],"graph_type":"request","breakpoints":[]}